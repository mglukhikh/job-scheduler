job-scheduler
=============

Initiating letter
-----------------

Develop a library for executing jobs with dependencies in the background. There should be an APIs for scheduling jobs, setting up dependencies between jobs, notifying library users about job progress. Jobs can be one-time, or recurrent with flexible recurrence configuration. There should be an ability to fire a pre-scheduled job as a response to an event. The library should be ready to be used in long-running processes, like web- and application servers. The library should be capable of handling swarm of short jobs, as well as long-running jobs, with flexible control about schedules. Otherwise design features and capabilities as you see fit.

Please don’t use existing libraries like Quartz as a backend for your library. That would defeat the purpose.

Complete solution should include:

* brief design document about how it works, architecture and future evolution opportunities
* library source code and deployment artifacts ready to be pushed to maven
* fair amount of documentation
* tests
* sample web application running jobs and single page with online (live) job status, progress, etc.
 * implementing status page without refresh and periodic polling would be a plus
 * easily runnable application without setup is a must

Job is a code user wants to run asynchronously in the application, so it’s more like a Runnable with extra features. Of course, running a Job has some purpose, so there should be some kind of result. Whether a Job is like Future with a result, like Runnable that should put result somewhere, or like an Observable or Event, that passes result down the chain is up to your design decision.

We’d like to see a web page that demonstrates using a library in a server environment, yes. Not necessary very useful, it should present capabilities to start jobs, may be with parameters, tracking jobs’ progress and observing a result.

Scheduling options should ideally be pluggable/extensible and including basic set of useful schedulers, like one-time job, one-time job with an fire-off alarm, recurring job, triggered when other job has finished, etc. Combinable schedules would be nice, so that I can combine “at specific date/time” and “recurring” schedules to be able to code scenario like “trigger job ’Send best wishes for New Year for respective time zone’ on 31 Dec every year at 17:00 and repeat 8 times with 1 hour interval”.

General thoughts
----------------

We should have a front-end (core, library itself) and a back-end (some visualizer). 

The frond-end is based on the following things:

* Scheduler, which controls everything
 * It converts each registered Job to Runnable which first do some waiting and then execute the Job itself
 * It is based on some Executor, like fixedThreadPool or scheduledThreadPool
 * It may use Timer and TimerTask to do scheduling. Timer does support absolute timing but scheduledThreadPool does not.
 * Some synchronization must be included because scheduling methods are called from HTTP request threads. NB: Timer is thread safe
* Job, which contains some Runnable inside and some scheduling precondition like
 * Time, relative (seconds from now) or absolute (Date)
 * Required jobs to complete first, like Set<Job>
  * Scheduler should have some loop-control
 * Initiating Event
* Event, which can be generated by a Job and caught by Scheduler to start another Job
* ...

The back-end can be based on a Java Servlet and included in Glassfish or so. NB: as I know, both this methods will require installation. May be something simple should be implemented instead?

